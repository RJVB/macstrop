# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$

PortSystem          1.0

set kf5.project     ksysguard
set kf5.virtualPath plasma
PortGroup           kf5 1.1

subport kf5-libksysguard {
    set kf5.project libksysguard
    set kf5.virtualPath \
                    plasma
    # yes, we need to include the PortGroup here and at the toplevel!
    PortGroup       kf5 1.1
}

kf5.use_latest      plasma

maintainers         gmail.com:rjvbertin mk openmaintainer

if {${subport} eq "kf5-libksysguard"} {
    description     KF5 sysguard library
    long_description \
                    KF5 sysguard library, used by port:kf5-ksysguard
    checksums       rmd160  ecde144f1405e5ae25f8b97cade3d9e7b6659f1e \
                    sha256  467642916197df61df0658fc6e2b4c46dc8acc397217e7b97feff96c715a9c29

    kf5.depends_frameworks \
                    kauth kconfig kconfigwidgets kcompletion \
                    kcoreaddons ki18n kiconthemes kservice \
                    kwidgetsaddons kwindowsystem plasma-framework
    depends_lib-append \
                    port:zlib
    platform darwin {
        variant kde4compat description {allow installation alongside KDE4's port:kde-l10n-*} {
            post-destroot {
                file delete -force ${destroot}${prefix}/share/locale
            }
        }
    }
} else {
    description     KF5 KSysGuard daemon
    long_description \
                    KF5 KSysGuard is a program to monitor various elements of your system, or any \
                    other remote system with the KSysGuard daemon (ksysguardd) installed. \
                    Currently the daemon has been ported to Linux, FreeBSD, Irix, NetBSD, \
                    OpenBSD, Solaris and Tru64 with varying degrees of completion.
    checksums       rmd160  455c0489112f60b938bdb8c2134b7c5f3e11de8a \
                    sha256  81dd907744208f5519e0b10ab482c21aa2d7752218271221d09ba2a626e10300
    depends_lib-append \
                    port:kf5-libksysguard
    kf5.depends_frameworks \
                    kconfig kcoreaddons kdbusaddons ki18n \
                    kiconthemes kinit kio kitemviews knewstuff \
                    knotifications kwindowsystem

    unset kf5.allow_docs_generation
    post-destroot {
        kf5.add_app_wrapper ksysguard5 ksysguard
        kf5.add_app_wrapper ksysguardd5 ksysguardd
    }
    platform darwin {
        long_description-append \
                    It runs on OS X but without providing any information of interest.
        notes-append \
                    "This port currently doesn't do anything"
        variant kde4compat description {allow installation alongside KDE4's port:kde-l10n-* and port:kde4-workspace} {
            post-destroot {
                if {[file exists ${destroot}${prefix}/share/doc/HTML]} {
                    file delete -force ${destroot}${prefix}/share/doc/HTML
                }
                file delete -force ${destroot}${prefix}/share/locale
            }
        }
    }
}


livecheck.type      regex
livecheck.url       http://download.kde.org/stable/plasma/
livecheck.regex     (5+(\\.\\d+)+)
