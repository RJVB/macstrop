# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem      1.0
PortGroup       qt5 1.0
PortGroup       cmake 1.1

name            qsynth
version         0.5.6
maintainers     gmail.com:rjvbertin mojca openmaintainer
categories      audio
platforms       darwin
license         GPL-2

description     a fluidsynth GUI front-end application.
long_description \
                Qsynth is a fluidsynth GUI front-end application, written in C++ using the Qt framework. \
                Eventually it may evolve into a softsynth management application allowing the user to \
                control and manage a variety of command line softsynths.

homepage        https://sourceforge.net/projects/qsynth/
distname        qsynth-${version}
master_sites    sourceforge:project/${name}/${name}/${version}

checksums       rmd160  0bd16d01c5f2b346f5bd5ab22f17952d54f15081 \
                sha256  a6eb404778fad87bb37fa1fb4caf1d80f24a324f9c3a22b669df2f8c94849040
#                 size    269583

depends_lib-append \
                port:fluidsynth
qt5.depends_build_component \
                qttools

variant gm description {use the MIDI instrument patches from port:fluid-soundfont} {
    depends_run-append \
                port:fluid-soundfont
}
variant gu description {use the MIDI instrument patches from port:generaluser-soundfont} {
    depends_run-append \
                port:generaluser-soundfont
}
default_variants \
                +gu

patch.pre_args  -Np1
patchfiles-append \
                patch-fix-build.diff

configure.args-append \
                -DBUNDLE_INSTALL_DIR=${qt_apps_dir}

if {${os.platform} eq "darwin"} {
    post-destroot {
        if {[info procs qt5.add_app_wrapper] ne ""} {
           qt5.add_app_wrapper qsynth
        }
    }
} else {
    cmake.install_rpath-prepend \
                ${qt_libs_dir} \
                ${prefix}/lib/${build_arch}-linux-gnu
}

livecheck.regex /${name}-(\[0-9.\]+)${extract.suffix}
