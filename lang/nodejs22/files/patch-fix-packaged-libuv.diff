diff --git deps/uv/src/unix/orig.udp.c deps/uv/src/unix/udp.c
index c4a3559..07e5561 100644
--- deps/uv/src/unix/orig.udp.c
+++ deps/uv/src/unix/udp.c
@@ -32,6 +32,10 @@
 #endif
 #include <sys/un.h>
 
+#if (defined(__APPLE__) && !TARGET_OS_IPHONE)
+# include <AvailabilityMacros.h>
+#endif
+
 #if defined(IPV6_JOIN_GROUP) && !defined(IPV6_ADD_MEMBERSHIP)
 # define IPV6_ADD_MEMBERSHIP IPV6_JOIN_GROUP
 #endif
@@ -152,7 +156,7 @@ static void uv__udp_io(uv_loop_t* loop, uv__io_t* w, unsigned int revents) {
 }
 
 static int uv__udp_recvmmsg(uv_udp_t* handle, uv_buf_t* buf) {
-#if defined(__linux__) || defined(__FreeBSD__) || defined(__APPLE__)
+#if defined(__linux__) || defined(__FreeBSD__) || (defined(__APPLE__) && MAC_OS_X_VERSION_MIN_REQUIRED >= 101500)
   struct sockaddr_in6 peers[20];
   struct iovec iov[ARRAY_SIZE(peers)];
   struct mmsghdr msgs[ARRAY_SIZE(peers)];
@@ -180,7 +184,7 @@ static int uv__udp_recvmmsg(uv_udp_t* handle, uv_buf_t* buf) {
     msgs[k].msg_len = 0;
   }
 
-#if defined(__APPLE__)
+#if (defined(__APPLE__) && MAC_OS_X_VERSION_MIN_REQUIRED >= 101500)
   do
     nread = recvmsg_x(handle->io_watcher.fd, msgs, chunks, MSG_DONTWAIT);
   while (nread == -1 && errno == EINTR);
@@ -1311,7 +1315,7 @@ static int uv__udp_sendmsgv(int fd,
   r = 0;
   nsent = 0;
 
-#if defined(__linux__) || defined(__FreeBSD__) || defined(__APPLE__) || \
+#if defined(__linux__) || defined(__FreeBSD__) || (defined(__APPLE__) && MAC_OS_X_VERSION_MIN_REQUIRED >= 101500) || \
   (defined(__sun__) && defined(MSG_WAITFORONE))
   if (count > 1) {
     for (i = 0; i < count; /*empty*/) {
@@ -1323,7 +1327,7 @@ static int uv__udp_sendmsgv(int fd,
           goto exit;
 
       do
-#if defined(__APPLE__)
+#if (defined(__APPLE__) && MAC_OS_X_VERSION_MIN_REQUIRED >= 101500)
         r = sendmsg_x(fd, m, n, MSG_DONTWAIT);
 #else
         r = sendmmsg(fd, m, n, 0);
@@ -1339,7 +1343,7 @@ static int uv__udp_sendmsgv(int fd,
 
     goto exit;
   }
-#endif  /* defined(__linux__) || defined(__FreeBSD__) || defined(__APPLE__) ||
+#endif  /* defined(__linux__) || defined(__FreeBSD__) || (defined(__APPLE__) && MAC_OS_X_VERSION_MIN_REQUIRED >= 101500) ||
 	 * (defined(__sun__) && defined(MSG_WAITFORONE))
 	 */
 
