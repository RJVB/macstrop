PortSystem      1.0
PortGroup       github 1.0
PortGroup       LTO 1.0
PortGroup       makefile 1.0

github.setup    Oblomov clinfo 47c78bf2e975dda179829ee2358ef7e8721149d2
version         3.0.23.01.25.5
distname        ${name}-git

fetch.type      git

categories      devel
platforms       darwin linux
license         CC0
maintainers     gmail.com:rjvbertin openmaintainer
supported_archs x86_64
description     Print OpenCL info

if {${os.platform} eq "darwin"} {
    variant opencl_icd description {Link to an OpenCL loader instead of to Apple's OpenCL framework} {}
    if {[variant_isset opencl_icd]} {
        long_description \
                a simple command-line application that enumerates all possible (known) \
                properties of the OpenCL platform(s) and devices available on the system.
        depends_lib-append \
                port:ocl-icd
        configure.ldflags-append \
                -F ${prefix}/Library/Frameworks
        notes-append "Query the properties of Apple's OpenCL framework using\n" \
        "> env DYLD_FRAMEWORK_PATH=/System/Library/Frameworks clinfo"
    } else {
        long_description \
                a simple command-line application that enumerates all possible (known) \
                properties of Apple's OpenCL platform and the devices it provides on this system.
        notes-append "Query the properties of alternative OpenCL implementations using\n" \
        "> env DYLD_FRAMEWORK_PATH=${prefix}/Library/Frameworks clinfo\n" \
        "(requires port:ocl-icd)"
    }
} else {
    long_description \
                a simple command-line application that enumerates all possible (known) \
                properties of the OpenCL platform(s) and devices available on the system.
}

destroot.pre_args-append \
                MANDIR=${prefix}/share/man
