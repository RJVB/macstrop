diff --git b/AquaProxy/Library/LaunchAgents/orig.Wowfunhappy.AquaProxy.HTTP.plist a/AquaProxy/Library/LaunchAgents/Wowfunhappy.AquaProxy.HTTP.plist
index 6418fc0..869c2b9 100644
--- b/AquaProxy/Library/LaunchAgents/orig.Wowfunhappy.AquaProxy.HTTP.plist
+++ a/AquaProxy/Library/LaunchAgents/Wowfunhappy.AquaProxy.HTTP.plist
@@ -7,17 +7,17 @@
 	<string>Wowfunhappy.AquaProxy.HTTP</string>
 
 	<key>WorkingDirectory</key>
-	<string>/Library/AquaProxy</string>
+	<string>@PREFIX@/Library/AquaProxy</string>
 
 	<key>ProgramArguments</key>
 	<array>
-		<string>/Library/AquaProxy/Aqua-HTTP-Proxy</string>
+		<string>@PREFIX@/Library/AquaProxy/Aqua-HTTP-Proxy</string>
 	</array>
 
 	<key>StandardOutPath</key>
-	<string>/tmp/Aqua-HTTP-Proxy.log</string>
+	<string>/var/log/Aqua-HTTP-Proxy.log</string>
 	<key>StandardErrorPath</key>
-	<string>/tmp/Aqua-HTTP-Proxy.error.log</string>
+	<string>/var/log/Aqua-HTTP-Proxy.error.log</string>
 
 	<key>RunAtLoad</key>
 	<true/>
diff --git b/AquaProxy/Library/LaunchAgents/orig.Wowfunhappy.AquaProxy.IMAP.plist a/AquaProxy/Library/LaunchAgents/Wowfunhappy.AquaProxy.IMAP.plist
index 5db7cda..0cccd58 100644
--- b/AquaProxy/Library/LaunchAgents/orig.Wowfunhappy.AquaProxy.IMAP.plist
+++ a/AquaProxy/Library/LaunchAgents/Wowfunhappy.AquaProxy.IMAP.plist
@@ -7,17 +7,17 @@
 	<string>Wowfunhappy.AquaProxy.IMAP</string>
 
 	<key>WorkingDirectory</key>
-	<string>/Library/AquaProxy</string>
+	<string>@PREFIX@/Library/AquaProxy</string>
 
 	<key>ProgramArguments</key>
 	<array>
-		<string>/Library/AquaProxy/Aqua-IMAP-Proxy</string>
+		<string>@PREFIX@/Library/AquaProxy/Aqua-IMAP-Proxy</string>
 	</array>
 
 	<key>StandardOutPath</key>
-	<string>/tmp/Aqua-IMAP-Proxy.log</string>
+	<string>/var/log/Aqua-IMAP-Proxy.log</string>
 	<key>StandardErrorPath</key>
-	<string>/tmp/Aqua-IMAP-Proxy.error.log</string>
+	<string>/var/log/Aqua-IMAP-Proxy.error.log</string>
 
 	<key>RunAtLoad</key>
 	<true/>
diff --git b/AquaProxy/Library/LaunchAgents/orig.Wowfunhappy.AquaProxy.Restarter.plist a/AquaProxy/Library/LaunchAgents/Wowfunhappy.AquaProxy.Restarter.plist
index c11eb1b..19039e8 100644
--- b/AquaProxy/Library/LaunchAgents/orig.Wowfunhappy.AquaProxy.Restarter.plist
+++ a/AquaProxy/Library/LaunchAgents/Wowfunhappy.AquaProxy.Restarter.plist
@@ -23,10 +23,10 @@
 
 	<key>WatchPaths</key>
 	<array>
-		<string>/Library/AquaProxy/redirects.txt</string>
-		<string>/Library/AquaProxy/flags.txt</string>
-		<string>/Library/AquaProxy/no-mitm.txt</string>
+		<string>@PREFIX@/Library/AquaProxy/redirects.txt</string>
+		<string>@PREFIX@/Library/AquaProxy/flags.txt</string>
+		<string>@PREFIX@/Library/AquaProxy/no-mitm.txt</string>
 	</array>
 
 </dict>
-</plist>
\ No newline at end of file
+</plist>
diff --git b/AquaProxy/Library/LaunchAgents/orig.Wowfunhappy.AquaProxy.SyncProxiesWithShell.plist a/AquaProxy/Library/LaunchAgents/Wowfunhappy.AquaProxy.SyncProxiesWithShell.plist
index dfa0c5a..3256744 100644
--- b/AquaProxy/Library/LaunchAgents/orig.Wowfunhappy.AquaProxy.SyncProxiesWithShell.plist
+++ a/AquaProxy/Library/LaunchAgents/Wowfunhappy.AquaProxy.SyncProxiesWithShell.plist
@@ -1,6 +1,6 @@
 <!--
 
-Sets environment variables used by CLI tools according to proxy settings in System Preferences.
+Sets environment variables used by CLI tools according to AquaProxy-related proxy settings in System Preferences.
 
 -->
 
@@ -21,32 +21,21 @@ Sets environment variables used by CLI tools according to proxy settings in Syst
 				local host=$(scutil --proxy | grep "$1Proxy" | awk '{print $3}')
 				local port=$(scutil --proxy | grep "$1Port" | awk '{print $3}')
 				
-				if [ "$enabled" = "1" ] &amp;&amp; [ -n "$host" ]
+				if ( [ "$host" = "localhost" ] || [ "$host" = "127.0.0.1" ] ) &amp;&amp; [ "$port" = "6531" ] &amp;&amp; [ "$enabled" = "1" ]
 				then
-					if [ -z "$port" ]
-					then
-						port=$3
-					fi
 					
-					if [ "$1" = "SOCKS" ]
-					then
-						launchctl setenv "$2" "socks://${host}:${port}"
-					else
-						launchctl setenv "$2" "http://${host}:${port}"
-					fi
+					launchctl setenv "$2" "http://${host}:${port}"
 				else
 					launchctl unsetenv "$2"
 				fi
 			}
 
 			apply_proxy_settings() {
-				set_proxy_env "HTTP" "HTTP_PROXY" "8080"
 				set_proxy_env "HTTPS" "HTTPS_PROXY" "8080"
-				set_proxy_env "FTP" "FTP_PROXY" "21"
-				set_proxy_env "SOCKS" "SOCKS_PROXY" "1080"
 
+				HTTPS_PROXY=$(launchctl getenv HTTPS_PROXY)
 				EXCEPTIONS=$(scutil --proxy | grep "ExceptionsList" -A 50 | grep -E "^\s+[0-9]+" | awk '{print $3}' | tr '\n' ',' | sed 's/,$//')
-				if [ -n "$EXCEPTIONS" ]
+				if [ -n "$EXCEPTIONS" ] &amp;&amp; [ -n "$HTTPS_PROXY" ]
 				then
 					launchctl setenv "NO_PROXY" "$EXCEPTIONS"
 				else
